// Layout Builder updates.

// Remove background for Layout Builder - DRUP8-1012.
.layout-builder {
  background-color: transparent;
}

// Remove background on block sections in Layout Builder.
.layout-builder-block {
  background-color: transparent;

  &:not([class*='osu-min-h-']) {
    min-height: 13rem;
  }
}

// DRUP8-1056
#layout-builder-modal {
  .form-item {
    width: 100%;
  }

  .form-radios > div {
    width: initial;
  }
}

#drupal-off-canvas:not(.drupal-off-canvas-reset),
#drupal-off-canvas-wrapper {
  .messages.messages.messages--error p {
    color: $paddletailblack-hsl;
  }

  .inline-block-list {
    li {
      border: none !important;
      max-width: 15rem;
      padding: 0 0.5rem 2.5rem 0.5rem !important;
      width: 40% !important;
    }
  }

  span.input-icon.fade-zoom-in {
    background-image: url(../assets/fade-zoom-in.svg);
  }

  .form-item {
    width: 100%;
  }

  .form-radios > div {
    width: initial;
  }

  form.layout-builder-configure-block {
    details[id^='edit-appearance-positioning'] {
      display: none;
    }
  }

  .paragraphs-dropdown {
    button.paragraphs-dropdown-toggle {
      background: url('../assets/icon-actions.svg') no-repeat center;
      background-size: 26px 26px;
      border: 1px solid #727579 !important;
      border-radius: 0.25rem;
      cursor: pointer !important;
      display: block !important;
      height: 36px !important;
      margin-block: 1rem;
      width: 36px !important;
    }

    .paragraphs-dropdown-actions {
      background-color: #383a40;
    }
  }
}

// Thicken resizable mouse grabber for Off Canvas Dialog - DRUP8-1036.
.ui-dialog .ui-resizable-w {
  background-color: #727579;
  left: 0;
  width: 5px;
}

#drupal-modal .form-item {
  width: initial !important;
}

.node-layout-builder-form {
  @extend .container;
}

// The row class has negative margins. Adding margin 0 inline to the layout builder section row stops the
// content from overflowing.

.w-100,
.container-fluid {
  & > .row.layout-builder__layout {
    margin-inline: 0;
  }
}

.container-fluid > .row.layout-builder__layout {
  padding-inline: 1rem;
  @media screen and (min-width: 768px) {
    padding-inline: 2rem;
  }
  @media screen and (min-width: 992px) {
    padding-inline: 3rem;
  }
}

// Adding an X to a few buttons that are missed in themeing. Might need to remove in the future.
.editor-link-dialog,
.editor-file-dialog {
  button.ui-dialog-titlebar-close:after {
    content: 'X';
    position: relative;
    top: -0.55rem;
  }
}

.media-library-widget-modal {
  --osu-border-radius: .625em;

  button.ui-dialog-titlebar-close:after {
    content: "\00d7";
    position: relative;
    top: -0.55rem;
  }

  .views-exposed-form .form-wrapper {
    align-self: end;
  }

  .media-library-views-form__rows {
    display: flex;
    flex-basis: 100%;
    flex-wrap: wrap;
    gap: 1rem;

    .media-library-item--grid {
      background-color: var(--bs-body-bg);
      border-radius: var(--osu-border-radius);
      flex: 1 0 20%;
      margin: .5rem 1rem;
      position: relative;
      width: 20%;

      &:before {
        border: 1px solid var(--bs-secondary);
        border-radius: .5em;
        content: '';
        height: 100%;
        left: 0;
        pointer-events: none;
        position: absolute;
        top: 0;
        transition: border-color 0.2s, color 0.2s, background 0.2s;
        width: 100%;
      }

      &.is-hover:before,
      &.is-focus:before {
        border-color: var(--bs-gray-dark);
      }

      &.media-library-item--disabled {
        opacity: .5;
        pointer-events: none;
        --bs-secondary: var(--bs-gray-600);
      }

      .media-library-item__click-to-select-trigger {
        cursor: pointer;
      }

      .media-library-item__click-to-select-checkbox {
        left: 0.75rem;
        position: absolute;
        top: .25rem;
      }

      .media-library-item__preview-wrapper {
        .field--name-thumbnail {
          align-items: center;
          display: flex;
          justify-content: center;

          .image-style-medium {
            height: 11.25rem;
            object-fit: contain;
            object-position: center center;
          }
        }

        .media-library-item__attributes {
          background-color: var(--bs-gray-dark);
          border-bottom-left-radius: var(--osu-border-radius);
          border-bottom-right-radius: var(--osu-border-radius);
          color: var(--bs-secondary);
          padding: .5rem 1.5rem;

          .media-library-item__name {
            font-size: 1rem;
            overflow: hidden;
            text-overflow: ellipsis;
            text-wrap: nowrap;
          }
        }
      }
    }
  }

  .media-library-item--table {
    vertical-align: middle;

    &.media-library-item--disabled {
      pointer-events: none;
      --bs-table-color-state: var(--bs-secondary-color);

      a {
        color: var(--bs-secondary-color);
        text-decoration-color: var(--bs-secondary-color)
      }
    }

    td {
      padding: .625rem 1rem;
    }

    img {
      max-width: 6.25rem;
    }
  }
}


button.video-content__controls {
  bottom: 5rem;
  --bs-btn-border-radius: 5px;
  left: calc(100vw - 10rem);
  width: 8rem;
}

.bg-video.bg-image.background-local-video {
  & video,
  button.video-content__controls {
    display: none;
    @media screen and (min-width: 768px) {
      display: initial;
    }
  }
}
